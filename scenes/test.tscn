[gd_scene load_steps=16 format=3 uid="uid://dnntl07sv0dsb"]

[ext_resource type="Script" path="res://scripts/scene_init.gd" id="1_3m4j7"]
[ext_resource type="PackedScene" uid="uid://cmb64uww8qbog" path="res://scenes/iso_camera.tscn" id="1_mx36s"]
[ext_resource type="Script" path="res://scripts/gameplay_input.gd" id="2_fqsbe"]
[ext_resource type="PackedScene" uid="uid://b64ct1sr3433f" path="res://models/npc.tscn" id="5_bkokk"]
[ext_resource type="PackedScene" uid="uid://bp4mdtljbkreq" path="res://models/items/hat/hat.tscn" id="6_681g0"]
[ext_resource type="PackedScene" uid="uid://d2b2b4qbke2we" path="res://UI/ui.tscn" id="6_cdpqt"]
[ext_resource type="Environment" uid="uid://bb6goxby35gmv" path="res://scenes/outdoor_env.tres" id="6_dchxl"]

[sub_resource type="NavigationMesh" id="NavigationMesh_vwcsu"]
vertices = PackedVector3Array(-1.5, 0.0169362, 4, -1.5, 0.0169362, 3.5, -2.5, 0.0169362, 3.25, -7.5, 0.0169362, 4, -9.5, 0.0169362, 5.75, -7.75, 0.0169362, 6, -7.5, 0.0169362, 4, -9.5, 0.0169362, -2, -0.500002, 0.0169362, 1.25, -0.250002, 0.0169362, 1.75, -1.90735e-06, 0.0169362, -9.5, -7.5, 0.0169362, 4, -2.5, 0.0169362, 3.25, -2.5, 0.0169362, 1.5, -9.5, 0.0169362, -2, -9.5, 0.0169362, -2, -2.5, 0.0169362, 1.5, -0.500002, 0.0169362, 1.25, -1.90735e-06, 0.0169362, -9.5, -9.5, 0.0169362, -9.5, -0.250002, 0.0169362, 1.75, -0.250002, 0.0169362, 3, 9.5, 0.0169362, 2.75, 9.5, 0.0169362, -3.5, 9.5, 0.0169362, -3.5, 9.5, 0.0169362, -9.5, -1.90735e-06, 0.0169362, -9.5, -0.250002, 0.0169362, 1.75, -0.500002, 0.0169362, 3.5, -1.5, 0.0169362, 3.5, -1.5, 0.0169362, 4, 0.249998, 0.0169362, 4, 0.249998, 0.116936, 8.25, 0.249998, 0.0169362, 9.25, 9.5, 0.0169362, 9.5, -0.250002, 0.0169362, 3, -0.500002, 0.0169362, 3.5, 0.249998, 0.0169362, 4, 9.5, 0.0169362, 2.75, -7.75, 0.0169362, 6, -9.5, 0.0169362, 5.75, -9.5, 0.0169362, 9.5, -7.5, 0.0169362, 9.25, 0.249998, 0.0169362, 9.25, -1.90735e-06, 0.0169362, 9.5, 9.5, 0.0169362, 9.5, -7.5, 0.0169362, 9.25, -9.5, 0.0169362, 9.5, -1.90735e-06, 0.0169362, 9.5, 0.249998, 0.0169362, 9.25, 9.5, 0.0169362, 2.75, 0.249998, 0.0169362, 4, 0.249998, 0.116936, 5, 0.249998, 0.116936, 5, -6.75, 1.85694, 5, -6.75, 1.85694, 8.25, 0.249998, 0.116936, 8.25, -1.15, 1.03694, 5, -2.55, 1.85694, 5, -2.55, 1.85694, 8.25, -1.15, 1.03694, 8.25, -1.01997, 0.856936, 6.50796, -2.50498, 1.85694, 6.49697, 0.249998, 0.116936, 5, 0.249998, 0.116936, 8.25, 9.5, 0.0169362, 9.5, 9.5, 0.0169362, 2.75, 1.98003, 0.0169362, 6.50796, 5.00509, 0.0169362, 8.0129, -6.5, 0.0169362, 5.25, -6.5, 0.0169362, 8, -2.5, 0.0169362, 8, -2.5, 0.0169362, 5.25)
polygons = [PackedInt32Array(1, 0, 2), PackedInt32Array(2, 0, 3), PackedInt32Array(5, 4, 6), PackedInt32Array(6, 4, 7), PackedInt32Array(10, 9, 8), PackedInt32Array(12, 11, 13), PackedInt32Array(13, 11, 14), PackedInt32Array(16, 15, 17), PackedInt32Array(17, 15, 19), PackedInt32Array(17, 19, 18), PackedInt32Array(21, 20, 22), PackedInt32Array(22, 20, 23), PackedInt32Array(25, 24, 26), PackedInt32Array(26, 24, 27), PackedInt32Array(29, 28, 30), PackedInt32Array(30, 28, 31), PackedInt32Array(34, 33, 32), PackedInt32Array(36, 35, 37), PackedInt32Array(37, 35, 38), PackedInt32Array(39, 42, 40), PackedInt32Array(40, 42, 41), PackedInt32Array(45, 44, 43), PackedInt32Array(49, 48, 46), PackedInt32Array(46, 48, 47), PackedInt32Array(52, 51, 50), PackedInt32Array(60, 61, 56), PackedInt32Array(56, 61, 53), PackedInt32Array(53, 61, 57), PackedInt32Array(57, 62, 58), PackedInt32Array(58, 62, 54), PackedInt32Array(54, 62, 55), PackedInt32Array(55, 62, 59), PackedInt32Array(59, 62, 60), PackedInt32Array(60, 62, 61), PackedInt32Array(61, 62, 57), PackedInt32Array(65, 68, 66), PackedInt32Array(66, 67, 63), PackedInt32Array(63, 67, 64), PackedInt32Array(64, 68, 65), PackedInt32Array(68, 67, 66), PackedInt32Array(67, 68, 64), PackedInt32Array(72, 71, 69), PackedInt32Array(69, 71, 70)]
cell_height = 0.01
agent_max_climb = 0.19
agent_max_slope = 75.0

[sub_resource type="BoxMesh" id="BoxMesh_ctec8"]

[sub_resource type="ConcavePolygonShape3D" id="ConcavePolygonShape3D_t7t2r"]
data = PackedVector3Array(-0.5, 0.5, 0.5, 0.5, 0.5, 0.5, -0.5, -0.5, 0.5, 0.5, 0.5, 0.5, 0.5, -0.5, 0.5, -0.5, -0.5, 0.5, 0.5, 0.5, -0.5, -0.5, 0.5, -0.5, 0.5, -0.5, -0.5, -0.5, 0.5, -0.5, -0.5, -0.5, -0.5, 0.5, -0.5, -0.5, 0.5, 0.5, 0.5, 0.5, 0.5, -0.5, 0.5, -0.5, 0.5, 0.5, 0.5, -0.5, 0.5, -0.5, -0.5, 0.5, -0.5, 0.5, -0.5, 0.5, -0.5, -0.5, 0.5, 0.5, -0.5, -0.5, -0.5, -0.5, 0.5, 0.5, -0.5, -0.5, 0.5, -0.5, -0.5, -0.5, 0.5, 0.5, 0.5, -0.5, 0.5, 0.5, 0.5, 0.5, -0.5, -0.5, 0.5, 0.5, -0.5, 0.5, -0.5, 0.5, 0.5, -0.5, -0.5, -0.5, 0.5, 0.5, -0.5, 0.5, -0.5, -0.5, -0.5, 0.5, -0.5, 0.5, 0.5, -0.5, -0.5, -0.5, -0.5, -0.5)

[sub_resource type="ArrayMesh" id="ArrayMesh_qblvr"]
resource_name = "untitled_Cube001"
_surfaces = [{
"aabb": AABB(-2.51617, -1, -3.85336, 5.03234, 2, 7.57308),
"attribute_data": PackedByteArray(0, 0, 192, 62, 0, 0, 128, 63, 0, 0, 0, 62, 0, 0, 128, 62, 0, 0, 192, 62, 0, 0, 0, 0, 0, 0, 32, 63, 0, 0, 128, 63, 0, 0, 32, 63, 0, 0, 0, 0, 0, 0, 96, 63, 0, 0, 128, 62, 0, 0, 192, 62, 0, 0, 64, 63, 0, 0, 0, 62, 0, 0, 0, 63, 0, 0, 192, 62, 0, 0, 64, 63, 0, 0, 32, 63, 0, 0, 64, 63, 0, 0, 32, 63, 0, 0, 64, 63, 0, 0, 96, 63, 0, 0, 0, 63, 0, 0, 192, 62, 0, 0, 128, 62, 0, 0, 192, 62, 0, 0, 128, 62, 0, 0, 192, 62, 0, 0, 128, 62, 0, 0, 32, 63, 0, 0, 128, 62, 0, 0, 32, 63, 0, 0, 128, 62, 0, 0, 32, 63, 0, 0, 128, 62, 0, 0, 192, 62, 0, 0, 0, 63, 0, 0, 192, 62, 0, 0, 0, 63, 0, 0, 192, 62, 0, 0, 0, 63, 0, 0, 32, 63, 0, 0, 0, 63, 0, 0, 32, 63, 0, 0, 0, 63, 0, 0, 32, 63, 0, 0, 0, 63),
"format": 4119,
"index_count": 36,
"index_data": PackedByteArray(0, 0, 9, 0, 3, 0, 0, 0, 6, 0, 9, 0, 8, 0, 21, 0, 10, 0, 8, 0, 19, 0, 21, 0, 20, 0, 17, 0, 23, 0, 20, 0, 14, 0, 17, 0, 13, 0, 4, 0, 15, 0, 13, 0, 2, 0, 4, 0, 7, 0, 12, 0, 18, 0, 7, 0, 1, 0, 12, 0, 22, 0, 5, 0, 11, 0, 22, 0, 16, 0, 5, 0),
"primitive": 3,
"vertex_count": 24,
"vertex_data": PackedByteArray(243, 8, 33, 192, 0, 0, 128, 191, 202, 15, 110, 64, 0, 0, 255, 127, 116, 177, 255, 255, 243, 8, 33, 192, 0, 0, 128, 191, 202, 15, 110, 64, 255, 127, 0, 0, 255, 255, 255, 191, 243, 8, 33, 192, 0, 0, 128, 191, 202, 15, 110, 64, 255, 127, 193, 201, 193, 201, 255, 255, 243, 8, 33, 192, 0, 0, 128, 63, 0, 0, 128, 63, 0, 0, 255, 127, 193, 201, 255, 255, 243, 8, 33, 192, 0, 0, 128, 63, 0, 0, 128, 63, 255, 127, 193, 201, 193, 201, 255, 255, 243, 8, 33, 192, 0, 0, 128, 63, 0, 0, 128, 63, 255, 127, 255, 255, 0, 0, 255, 191, 243, 8, 33, 192, 0, 0, 128, 191, 98, 157, 118, 192, 0, 0, 255, 127, 255, 127, 255, 255, 243, 8, 33, 192, 0, 0, 128, 191, 98, 157, 118, 192, 255, 127, 0, 0, 255, 255, 255, 191, 243, 8, 33, 192, 0, 0, 128, 191, 98, 157, 118, 192, 255, 255, 255, 255, 255, 127, 255, 255, 243, 8, 33, 192, 0, 0, 128, 63, 98, 157, 118, 192, 0, 0, 255, 127, 232, 143, 255, 255, 243, 8, 33, 192, 0, 0, 128, 63, 98, 157, 118, 192, 255, 255, 255, 255, 255, 127, 255, 255, 243, 8, 33, 192, 0, 0, 128, 63, 98, 157, 118, 192, 255, 127, 255, 255, 0, 0, 255, 191, 243, 8, 33, 64, 0, 0, 128, 191, 202, 15, 110, 64, 255, 127, 0, 0, 255, 255, 255, 191, 243, 8, 33, 64, 0, 0, 128, 191, 202, 15, 110, 64, 255, 127, 193, 201, 193, 201, 255, 255, 243, 8, 33, 64, 0, 0, 128, 191, 202, 15, 110, 64, 255, 255, 255, 127, 193, 201, 255, 255, 243, 8, 33, 64, 0, 0, 128, 63, 0, 0, 128, 63, 255, 127, 193, 201, 193, 201, 255, 255, 243, 8, 33, 64, 0, 0, 128, 63, 0, 0, 128, 63, 255, 127, 255, 255, 0, 0, 255, 191, 243, 8, 33, 64, 0, 0, 128, 63, 0, 0, 128, 63, 255, 255, 255, 127, 38, 193, 255, 255, 243, 8, 33, 64, 0, 0, 128, 191, 98, 157, 118, 192, 255, 127, 0, 0, 255, 255, 255, 191, 243, 8, 33, 64, 0, 0, 128, 191, 98, 157, 118, 192, 255, 255, 255, 255, 255, 127, 255, 255, 243, 8, 33, 64, 0, 0, 128, 191, 98, 157, 118, 192, 255, 255, 255, 127, 88, 151, 255, 255, 243, 8, 33, 64, 0, 0, 128, 63, 98, 157, 118, 192, 255, 255, 255, 255, 255, 127, 255, 255, 243, 8, 33, 64, 0, 0, 128, 63, 98, 157, 118, 192, 255, 127, 255, 255, 0, 0, 255, 191, 243, 8, 33, 64, 0, 0, 128, 63, 98, 157, 118, 192, 255, 255, 255, 127, 255, 127, 255, 255)
}]
blend_shape_mode = 0

[sub_resource type="ConcavePolygonShape3D" id="ConcavePolygonShape3D_3v8r8"]
data = PackedVector3Array(-2.5162, -1, 3.7197, -2.5162, 1, -3.8534, -2.5162, 1, 1, -2.5162, -1, 3.7197, -2.5162, -1, -3.8534, -2.5162, 1, -3.8534, -2.5162, -1, -3.8534, 2.5162, 1, -3.8534, -2.5162, 1, -3.8534, -2.5162, -1, -3.8534, 2.5162, -1, -3.8534, 2.5162, 1, -3.8534, 2.5162, -1, -3.8534, 2.5162, 1, 1, 2.5162, 1, -3.8534, 2.5162, -1, -3.8534, 2.5162, -1, 3.7197, 2.5162, 1, 1, 2.5162, -1, 3.7197, -2.5162, 1, 1, 2.5162, 1, 1, 2.5162, -1, 3.7197, -2.5162, -1, 3.7197, -2.5162, 1, 1, -2.5162, -1, -3.8534, 2.5162, -1, 3.7197, 2.5162, -1, -3.8534, -2.5162, -1, -3.8534, -2.5162, -1, 3.7197, 2.5162, -1, 3.7197, 2.5162, 1, -3.8534, -2.5162, 1, 1, -2.5162, 1, -3.8534, 2.5162, 1, -3.8534, 2.5162, 1, 1, -2.5162, 1, 1)

[sub_resource type="PlaneMesh" id="PlaneMesh_4aphy"]
size = Vector2(20, 20)
subdivide_width = 20
subdivide_depth = 20

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_11dum"]
albedo_color = Color(0.137255, 0.333333, 0.0431373, 1)

[sub_resource type="WorldBoundaryShape3D" id="WorldBoundaryShape3D_1k5nw"]

[node name="Node3D" type="Node3D"]
script = ExtResource("1_3m4j7")

[node name="level" type="Node3D" parent="."]

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="level"]
transform = Transform3D(1, 0, 0, 0, 0.790989, 0.611831, 0, -0.611831, 0.790989, 0, 3.29243, 0)
light_energy = 2.0
shadow_enabled = true

[node name="NavigationRegion3D" type="NavigationRegion3D" parent="level"]
navmesh = SubResource("NavigationMesh_vwcsu")

[node name="MeshInstance3D" type="MeshInstance3D" parent="level/NavigationRegion3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1.29624, 0.426265, 2.3379)
mesh = SubResource("BoxMesh_ctec8")
skeleton = NodePath("../..")

[node name="StaticBody3D" type="StaticBody3D" parent="level/NavigationRegion3D/MeshInstance3D"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="level/NavigationRegion3D/MeshInstance3D/StaticBody3D"]
shape = SubResource("ConcavePolygonShape3D_t7t2r")

[node name="Cube" type="MeshInstance3D" parent="level/NavigationRegion3D"]
transform = Transform3D(-3.62019e-08, 0, 1, 0, 1, 0, -0.828203, 0, -4.37114e-08, -3.35648, 0.836936, 6.64431)
mesh = SubResource("ArrayMesh_qblvr")
skeleton = NodePath("")

[node name="StaticBody3D" type="StaticBody3D" parent="level/NavigationRegion3D/Cube"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="level/NavigationRegion3D/Cube/StaticBody3D"]
shape = SubResource("ConcavePolygonShape3D_3v8r8")

[node name="floor" type="MeshInstance3D" parent="level/NavigationRegion3D"]
mesh = SubResource("PlaneMesh_4aphy")
skeleton = NodePath("../../..")
surface_material_override/0 = SubResource("StandardMaterial3D_11dum")

[node name="StaticBody3D" type="StaticBody3D" parent="level/NavigationRegion3D/floor"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="level/NavigationRegion3D/floor/StaticBody3D"]
shape = SubResource("WorldBoundaryShape3D_1k5nw")

[node name="pivot" parent="." instance=ExtResource("1_mx36s")]

[node name="input" type="Node3D" parent="."]
script = ExtResource("2_fqsbe")

[node name="npc" parent="." instance=ExtResource("5_bkokk")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.83593, 0, 0.66316)
model_scene = "res://models/npcs/npc01/npc_01.tscn"
attrib = [8, 5, 5, 8, 3]
align = 1

[node name="UI" parent="." instance=ExtResource("6_cdpqt")]

[node name="hat" parent="." instance=ExtResource("6_681g0")]
transform = Transform3D(3.17985, 0, 3.85857, 0, 5, 0, -3.85857, 0, 3.17985, -3.87163, 0.885122, 2.39112)

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = ExtResource("6_dchxl")
