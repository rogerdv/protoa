[gd_scene load_steps=13 format=3 uid="uid://dt7gftf2ag1aq"]

[ext_resource type="PackedScene" uid="uid://cmb64uww8qbog" path="res://scenes/iso_camera.tscn" id="1_mx36s"]
[ext_resource type="Script" path="res://scripts/scene_init.gd" id="1_ov8lr"]
[ext_resource type="Script" path="res://scripts/gameplay_input.gd" id="2_fqsbe"]
[ext_resource type="PackedScene" uid="uid://b64ct1sr3433f" path="res://models/npc.tscn" id="5_bkokk"]
[ext_resource type="PackedScene" uid="uid://bp4mdtljbkreq" path="res://models/items/hat/hat.tscn" id="6_681g0"]
[ext_resource type="PackedScene" uid="uid://d2b2b4qbke2we" path="res://UI/ui.tscn" id="6_cdpqt"]

[sub_resource type="NavigationMesh" id="NavigationMesh_vwcsu"]
vertices = PackedVector3Array(-9.5, 0.426265, 2.3, -2.3, 0.426265, 2.3, -2.3, 0.426265, 1.7, -9.5, 0.426265, 2.3, -2.3, 0.426265, 1.7, -2.1, 0.426265, 1.4, -1.2, 0.426265, -9.5, -9.5, 0.426265, -9.5, -2.1, 0.426265, 1.4, -1.2, 0.426265, 1.3, -1.2, 0.426265, -9.5, -0.200002, 0.426265, 1.7, -0.200002, 0.426265, 2.3, 9.5, 0.426265, 2.3, -0.400002, 0.426265, 1.4, -0.200002, 0.426265, 1.7, 9.5, 0.426265, 2.3, -1.2, 0.426265, 1.3, -0.400002, 0.426265, 1.4, 9.5, 0.426265, 2.3, 9.5, 0.426265, -9.5, -1.2, 0.426265, -9.5, -1.2, 0.426265, 9.5, -1.2, 0.426265, 3.4, -1.9, 0.426265, 3.4, -1.2, 0.426265, 9.5, -1.9, 0.426265, 3.4, -2.2, 0.426265, 3.2, -9.5, 0.426265, 2.3, -9.5, 0.426265, 9.5, -2.2, 0.426265, 3.2, -2.3, 0.426265, 2.3, -9.5, 0.426265, 2.3, -0.600001, 0.426265, 3.4, -1.2, 0.426265, 3.4, -1.2, 0.426265, 9.5, -0.300002, 0.426265, 3.2, -0.600001, 0.426265, 3.4, -1.2, 0.426265, 9.5, 9.5, 0.426265, 9.5, 9.5, 0.426265, 2.3, 9.5, 0.426265, 2.3, -0.200002, 0.426265, 2.3, -0.300002, 0.426265, 3.2)
polygons = [PackedInt32Array(2, 1, 0), PackedInt32Array(4, 3, 5), PackedInt32Array(5, 3, 7), PackedInt32Array(5, 7, 6), PackedInt32Array(8, 10, 9), PackedInt32Array(13, 12, 11), PackedInt32Array(16, 15, 14), PackedInt32Array(18, 17, 19), PackedInt32Array(19, 17, 21), PackedInt32Array(19, 21, 20), PackedInt32Array(24, 23, 22), PackedInt32Array(26, 25, 27), PackedInt32Array(27, 25, 29), PackedInt32Array(27, 29, 28), PackedInt32Array(30, 32, 31), PackedInt32Array(35, 34, 33), PackedInt32Array(37, 36, 38), PackedInt32Array(38, 36, 39), PackedInt32Array(39, 36, 40), PackedInt32Array(43, 42, 41)]
cell_size = 0.1

[sub_resource type="BoxMesh" id="BoxMesh_ctec8"]

[sub_resource type="ConcavePolygonShape3D" id="ConcavePolygonShape3D_t7t2r"]
data = PackedVector3Array(-0.5, 0.5, 0.5, 0.5, 0.5, 0.5, -0.5, -0.5, 0.5, 0.5, 0.5, 0.5, 0.5, -0.5, 0.5, -0.5, -0.5, 0.5, 0.5, 0.5, -0.5, -0.5, 0.5, -0.5, 0.5, -0.5, -0.5, -0.5, 0.5, -0.5, -0.5, -0.5, -0.5, 0.5, -0.5, -0.5, 0.5, 0.5, 0.5, 0.5, 0.5, -0.5, 0.5, -0.5, 0.5, 0.5, 0.5, -0.5, 0.5, -0.5, -0.5, 0.5, -0.5, 0.5, -0.5, 0.5, -0.5, -0.5, 0.5, 0.5, -0.5, -0.5, -0.5, -0.5, 0.5, 0.5, -0.5, -0.5, 0.5, -0.5, -0.5, -0.5, 0.5, 0.5, 0.5, -0.5, 0.5, 0.5, 0.5, 0.5, -0.5, -0.5, 0.5, 0.5, -0.5, 0.5, -0.5, 0.5, 0.5, -0.5, -0.5, -0.5, 0.5, 0.5, -0.5, 0.5, -0.5, -0.5, -0.5, 0.5, -0.5, 0.5, 0.5, -0.5, -0.5, -0.5, -0.5, -0.5)

[sub_resource type="WorldBoundaryShape3D" id="WorldBoundaryShape3D_1k5nw"]

[sub_resource type="PlaneMesh" id="PlaneMesh_4aphy"]
size = Vector2(20, 20)
subdivide_width = 20
subdivide_depth = 20

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_11dum"]
albedo_color = Color(0.137255, 0.333333, 0.0431373, 1)

[node name="Node3D" type="Node3D"]
script = ExtResource("1_ov8lr")

[node name="level" type="Node3D" parent="."]

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="level"]
transform = Transform3D(1, 0, 0, 0, 0.790989, 0.611831, 0, -0.611831, 0.790989, 0, 3.29243, 0)
light_energy = 2.0
shadow_enabled = true

[node name="NavigationRegion3D" type="NavigationRegion3D" parent="level"]
navmesh = SubResource("NavigationMesh_vwcsu")

[node name="MeshInstance3D" type="MeshInstance3D" parent="level/NavigationRegion3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1.29624, 0.426265, 2.3379)
mesh = SubResource("BoxMesh_ctec8")
skeleton = NodePath("../..")

[node name="StaticBody3D" type="StaticBody3D" parent="level/NavigationRegion3D/MeshInstance3D"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="level/NavigationRegion3D/MeshInstance3D/StaticBody3D"]
shape = SubResource("ConcavePolygonShape3D_t7t2r")

[node name="StaticBody3D" type="StaticBody3D" parent="level/NavigationRegion3D"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="level/NavigationRegion3D/StaticBody3D"]
shape = SubResource("WorldBoundaryShape3D_1k5nw")

[node name="floor" type="MeshInstance3D" parent="level/NavigationRegion3D/StaticBody3D"]
mesh = SubResource("PlaneMesh_4aphy")
skeleton = NodePath("../../../..")
surface_material_override/0 = SubResource("StandardMaterial3D_11dum")

[node name="pivot" parent="." instance=ExtResource("1_mx36s")]

[node name="input" type="Node3D" parent="."]
script = ExtResource("2_fqsbe")

[node name="npc" parent="." instance=ExtResource("5_bkokk")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.83593, 0, 0.66316)
model_scene = "res://models/npcs/npc_01/npc_01.tscn"
attrib = [8, 5, 5, 8, 3]
align = 1

[node name="UI" parent="." instance=ExtResource("6_cdpqt")]

[node name="hat" parent="." instance=ExtResource("6_681g0")]
transform = Transform3D(3.17985, 0, 3.85857, 0, 5, 0, -3.85857, 0, 3.17985, -3.87163, 0.885122, 2.39112)
