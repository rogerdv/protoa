[gd_scene load_steps=16 format=3 uid="uid://dnntl07sv0dsb"]

[ext_resource type="Script" path="res://scripts/scene_init.gd" id="1_3m4j7"]
[ext_resource type="PackedScene" uid="uid://cmb64uww8qbog" path="res://scenes/iso_camera.tscn" id="1_mx36s"]
[ext_resource type="ArrayMesh" uid="uid://cylrr7ou0lhks" path="res://models/props/stairs.obj" id="2_bao3r"]
[ext_resource type="Script" path="res://scripts/gameplay_input.gd" id="2_fqsbe"]
[ext_resource type="PackedScene" uid="uid://b64ct1sr3433f" path="res://models/npc.tscn" id="5_bkokk"]
[ext_resource type="PackedScene" uid="uid://bp4mdtljbkreq" path="res://models/items/hat/hat.tscn" id="6_681g0"]
[ext_resource type="PackedScene" uid="uid://d2b2b4qbke2we" path="res://UI/ui.tscn" id="6_cdpqt"]
[ext_resource type="Environment" uid="uid://bb6goxby35gmv" path="res://scenes/outdoor_env.tres" id="6_dchxl"]

[sub_resource type="NavigationMesh" id="NavigationMesh_vwcsu"]
vertices = PackedVector3Array(-3.8, 0.426265, 2.8, -2.3, 0.426265, 2.7, -2.2, 0.426265, 1.5, -9.5, 0.426265, 3.6, -4, 0.426265, 3.7, -4, 0.426265, 3.1, -9.5, 0.426265, 3.6, -4, 0.426265, 3.1, -3.8, 0.426265, 2.8, -9.5, 0.426265, 3.6, -3.8, 0.426265, 2.8, -2.2, 0.426265, 1.5, -9.5, 0.426265, 3.6, -2.2, 0.426265, 1.5, -1.9, 0.426265, 1.3, -9.5, 0.426265, -3, -9.5, 0.426265, -3, -1.9, 0.426265, 1.3, -1.2, 0.426265, 1.3, -1.2, 0.426265, -9.5, -9.5, 0.426265, -9.5, -0.300002, 0.426265, 1.5, -0.200002, 0.426265, 2.7, 0.0999985, 0.426265, 2.8, 9.5, 0.426265, 3.2, 0.0999985, 0.426265, 2.8, 0.199998, 0.676265, 3.2, 9.5, 0.426265, 3.2, -1.2, 0.426265, -9.5, -1.2, 0.426265, 1.3, -0.600001, 0.426265, 1.3, 9.5, 0.426265, -3.2, 9.5, 0.426265, -9.5, -0.600001, 0.426265, 1.3, -0.300002, 0.426265, 1.5, 9.5, 0.426265, 3.2, 9.5, 0.426265, -3.2, -0.100001, 0.676265, 3.7, -3, 1.42627, 3.7, -3, 1.42627, 8.6, -0.100001, 0.676265, 8.6, -1.26, 1.42627, 3.7, -1.26, 1.42627, 8.6, 0.199998, 0.676265, 8.9, 0.0999985, 0.426265, 9.5, 9.5, 0.426265, 9.5, -0.100001, 0.676265, 3.7, -0.100001, 0.676265, 8.6, 0.199998, 0.676265, 8.9, 9.5, 0.426265, 9.5, 9.5, 0.426265, 3.2, 0.199998, 0.676265, 3.2, -9.5, 0.426265, 9.5, -3.8, 0.426265, 9.5, -4, 0.426265, 9.2, -9.5, 0.426265, 3.6, -9.5, 0.426265, 9.5, -4, 0.426265, 9.2, -4, 0.426265, 3.7)
polygons = [PackedInt32Array(2, 1, 0), PackedInt32Array(5, 4, 3), PackedInt32Array(8, 7, 6), PackedInt32Array(11, 10, 9), PackedInt32Array(13, 12, 14), PackedInt32Array(14, 12, 15), PackedInt32Array(17, 16, 18), PackedInt32Array(18, 16, 20), PackedInt32Array(18, 20, 19), PackedInt32Array(22, 21, 23), PackedInt32Array(23, 21, 24), PackedInt32Array(25, 27, 26), PackedInt32Array(29, 28, 30), PackedInt32Array(30, 28, 31), PackedInt32Array(31, 28, 32), PackedInt32Array(34, 33, 35), PackedInt32Array(35, 33, 36), PackedInt32Array(40, 42, 37), PackedInt32Array(37, 42, 41), PackedInt32Array(41, 42, 39), PackedInt32Array(41, 39, 38), PackedInt32Array(45, 44, 43), PackedInt32Array(47, 46, 48), PackedInt32Array(48, 46, 51), PackedInt32Array(48, 51, 50), PackedInt32Array(48, 50, 49), PackedInt32Array(52, 54, 53), PackedInt32Array(58, 57, 55), PackedInt32Array(55, 57, 56)]
cell_size = 0.1

[sub_resource type="BoxMesh" id="BoxMesh_ctec8"]

[sub_resource type="ConcavePolygonShape3D" id="ConcavePolygonShape3D_t7t2r"]
data = PackedVector3Array(-0.5, 0.5, 0.5, 0.5, 0.5, 0.5, -0.5, -0.5, 0.5, 0.5, 0.5, 0.5, 0.5, -0.5, 0.5, -0.5, -0.5, 0.5, 0.5, 0.5, -0.5, -0.5, 0.5, -0.5, 0.5, -0.5, -0.5, -0.5, 0.5, -0.5, -0.5, -0.5, -0.5, 0.5, -0.5, -0.5, 0.5, 0.5, 0.5, 0.5, 0.5, -0.5, 0.5, -0.5, 0.5, 0.5, 0.5, -0.5, 0.5, -0.5, -0.5, 0.5, -0.5, 0.5, -0.5, 0.5, -0.5, -0.5, 0.5, 0.5, -0.5, -0.5, -0.5, -0.5, 0.5, 0.5, -0.5, -0.5, 0.5, -0.5, -0.5, -0.5, 0.5, 0.5, 0.5, -0.5, 0.5, 0.5, 0.5, 0.5, -0.5, -0.5, 0.5, 0.5, -0.5, 0.5, -0.5, 0.5, 0.5, -0.5, -0.5, -0.5, 0.5, 0.5, -0.5, 0.5, -0.5, -0.5, -0.5, 0.5, -0.5, 0.5, 0.5, -0.5, -0.5, -0.5, -0.5, -0.5)

[sub_resource type="WorldBoundaryShape3D" id="WorldBoundaryShape3D_1k5nw"]

[sub_resource type="PlaneMesh" id="PlaneMesh_4aphy"]
size = Vector2(20, 20)
subdivide_width = 20
subdivide_depth = 20

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_11dum"]
albedo_color = Color(0.137255, 0.333333, 0.0431373, 1)

[sub_resource type="ConcavePolygonShape3D" id="ConcavePolygonShape3D_uymp4"]
data = PackedVector3Array(0.195, 0.1112, -0.8429, 0.4233, 0.1112, -0.8429, 0.195, 0.1112, 0.8997, 0.195, 0.1112, 0.8997, 0.4233, 0.1112, -0.8429, 0.4233, 0.1112, 0.8997, 0.4233, 0.1112, 0.8997, 0.4233, -0.0288, 0.8997, 0.195, 0.1112, 0.8997, 0.195, 0.1112, 0.8997, 0.4233, -0.0288, 0.8997, 0.195, -0.0288, 0.8997, 0.195, -0.0288, -0.8429, 0.195, 0.1112, -0.8429, -0.0163, -0.0288, -0.8429, -0.0163, -0.0288, -0.8429, 0.195, 0.1112, -0.8429, -0.0163, 0.1112, -0.8429, 0.4233, -0.0288, -0.8429, 0.195, -0.0288, -0.8429, 0.4233, -0.0288, 0.8997, 0.4233, -0.0288, 0.8997, 0.195, -0.0288, -0.8429, 0.195, -0.0288, 0.8997, 0.4233, 0.1112, -0.8429, 0.4233, -0.0288, -0.8429, 0.4233, 0.1112, 0.8997, 0.4233, 0.1112, 0.8997, 0.4233, -0.0288, -0.8429, 0.4233, -0.0288, 0.8997, 0.195, 0.1112, -0.8429, 0.195, -0.0288, -0.8429, 0.4233, 0.1112, -0.8429, 0.4233, 0.1112, -0.8429, 0.195, -0.0288, -0.8429, 0.4233, -0.0288, -0.8429, -0.0163, -0.0288, 0.8997, -0.0163, -0.0288, -0.8429, -0.2535, -0.0288, 0.8997, -0.2535, -0.0288, 0.8997, -0.0163, -0.0288, -0.8429, -0.2535, -0.0288, -0.8429, 0.195, 0.1112, 0.8997, 0.195, -0.0288, 0.8997, -0.0163, 0.1112, 0.8997, -0.0163, 0.1112, 0.8997, 0.195, -0.0288, 0.8997, -0.0163, -0.0288, 0.8997, 0.195, -0.0288, 0.8997, 0.195, -0.0288, -0.8429, -0.0163, -0.0288, 0.8997, -0.0163, -0.0288, 0.8997, 0.195, -0.0288, -0.8429, -0.0163, -0.0288, -0.8429, -0.0163, 0.1112, -0.8429, 0.195, 0.1112, -0.8429, -0.0163, 0.2427, -0.8429, -0.0163, 0.2427, -0.8429, 0.195, 0.1112, -0.8429, 0.195, 0.2427, -0.8429, 0.195, 0.2427, -0.8429, 0.195, 0.2427, 0.8997, -0.0163, 0.2427, -0.8429, -0.0163, 0.2427, -0.8429, 0.195, 0.2427, 0.8997, -0.0163, 0.2427, 0.8997, -0.0163, -0.0288, -0.8429, -0.0163, 0.1112, -0.8429, -0.2535, -0.0288, -0.8429, -0.2535, -0.0288, -0.8429, -0.0163, 0.1112, -0.8429, -0.2535, 0.1112, -0.8429, 0.195, 0.1112, -0.8429, 0.195, 0.1112, 0.8997, 0.195, 0.2427, -0.8429, 0.195, 0.2427, -0.8429, 0.195, 0.1112, 0.8997, 0.195, 0.2427, 0.8997, 0.195, 0.1112, 0.8997, -0.0163, 0.1112, 0.8997, 0.195, 0.2427, 0.8997, 0.195, 0.2427, 0.8997, -0.0163, 0.1112, 0.8997, -0.0163, 0.2427, 0.8997, -0.2535, 0.2427, 0.8997, -0.2535, 0.1112, 0.8997, -0.8457, 0.2427, 0.8997, -0.8457, 0.2427, 0.8997, -0.2535, 0.1112, 0.8997, -0.8457, 0.1112, 0.8997, -0.2535, 0.3941, 0.8997, -0.2535, 0.2427, 0.8997, -0.8457, 0.3941, 0.8997, -0.8457, 0.3941, 0.8997, -0.2535, 0.2427, 0.8997, -0.8457, 0.2427, 0.8997, -0.0163, 0.2427, 0.8997, -0.2535, 0.2427, 0.8997, -0.0163, 0.3941, 0.8997, -0.0163, 0.3941, 0.8997, -0.2535, 0.2427, 0.8997, -0.2535, 0.3941, 0.8997, -0.0163, 0.2427, 0.8997, -0.0163, 0.1112, 0.8997, -0.2535, 0.2427, 0.8997, -0.2535, 0.2427, 0.8997, -0.0163, 0.1112, 0.8997, -0.2535, 0.1112, 0.8997, -0.0163, 0.1112, -0.8429, -0.0163, 0.2427, -0.8429, -0.2535, 0.1112, -0.8429, -0.2535, 0.1112, -0.8429, -0.0163, 0.2427, -0.8429, -0.2535, 0.2427, -0.8429, -0.0163, 0.1112, 0.8997, -0.0163, -0.0288, 0.8997, -0.2535, 0.1112, 0.8997, -0.2535, 0.1112, 0.8997, -0.0163, -0.0288, 0.8997, -0.2535, -0.0288, 0.8997, -0.0163, 0.3941, -0.8429, -0.0163, 0.3941, 0.8997, -0.2535, 0.3941, -0.8429, -0.2535, 0.3941, -0.8429, -0.0163, 0.3941, 0.8997, -0.2535, 0.3941, 0.8997, -0.0163, 0.2427, -0.8429, -0.0163, 0.2427, 0.8997, -0.0163, 0.3941, -0.8429, -0.0163, 0.3941, -0.8429, -0.0163, 0.2427, 0.8997, -0.0163, 0.3941, 0.8997, -0.2535, 0.2427, -0.8429, -0.2535, 0.3941, -0.8429, -0.8457, 0.2427, -0.8429, -0.8457, 0.2427, -0.8429, -0.2535, 0.3941, -0.8429, -0.8457, 0.3941, -0.8429, -0.2535, 0.2427, -0.8429, -0.0163, 0.2427, -0.8429, -0.2535, 0.3941, -0.8429, -0.2535, 0.3941, -0.8429, -0.0163, 0.2427, -0.8429, -0.0163, 0.3941, -0.8429, -0.8457, 0.1112, 0.8997, -0.8457, -0.0288, 0.8997, -0.8457, 0.1112, -0.8429, -0.8457, 0.1112, -0.8429, -0.8457, -0.0288, 0.8997, -0.8457, -0.0288, -0.8429, -0.8457, 0.1112, 0.8997, -0.8457, 0.1112, -0.8429, -0.8457, 0.2427, 0.8997, -0.8457, 0.2427, 0.8997, -0.8457, 0.1112, -0.8429, -0.8457, 0.2427, -0.8429, -0.8457, 0.2427, 0.8997, -0.8457, 0.2427, -0.8429, -0.8457, 0.3941, 0.8997, -0.8457, 0.3941, 0.8997, -0.8457, 0.2427, -0.8429, -0.8457, 0.3941, -0.8429, -0.2535, 0.3941, 0.8997, -0.8457, 0.3941, 0.8997, -0.2535, 0.5249, 0.8997, -0.2535, 0.5249, 0.8997, -0.8457, 0.3941, 0.8997, -0.8457, 0.5249, 0.8997, -0.2535, -0.0288, -0.8429, -0.2535, 0.1112, -0.8429, -0.8457, -0.0288, -0.8429, -0.8457, -0.0288, -0.8429, -0.2535, 0.1112, -0.8429, -0.8457, 0.1112, -0.8429, -0.2535, -0.0288, 0.8997, -0.2535, -0.0288, -0.8429, -0.8457, -0.0288, 0.8997, -0.8457, -0.0288, 0.8997, -0.2535, -0.0288, -0.8429, -0.8457, -0.0288, -0.8429, -0.2535, 0.1112, -0.8429, -0.2535, 0.2427, -0.8429, -0.8457, 0.1112, -0.8429, -0.8457, 0.1112, -0.8429, -0.2535, 0.2427, -0.8429, -0.8457, 0.2427, -0.8429, -0.2535, 0.1112, 0.8997, -0.2535, -0.0288, 0.8997, -0.8457, 0.1112, 0.8997, -0.8457, 0.1112, 0.8997, -0.2535, -0.0288, 0.8997, -0.8457, -0.0288, 0.8997, -0.2535, 0.5249, -0.8429, -0.2535, 0.5249, 0.8997, -0.8457, 0.5249, -0.8429, -0.8457, 0.5249, -0.8429, -0.2535, 0.5249, 0.8997, -0.8457, 0.5249, 0.8997, -0.2535, 0.3941, -0.8429, -0.2535, 0.3941, 0.8997, -0.2535, 0.5249, -0.8429, -0.2535, 0.5249, -0.8429, -0.2535, 0.3941, 0.8997, -0.2535, 0.5249, 0.8997, -0.8457, 0.3941, 0.8997, -0.8457, 0.3941, -0.8429, -0.8457, 0.5249, 0.8997, -0.8457, 0.5249, 0.8997, -0.8457, 0.3941, -0.8429, -0.8457, 0.5249, -0.8429, -0.8457, 0.3941, -0.8429, -0.2535, 0.3941, -0.8429, -0.8457, 0.5249, -0.8429, -0.8457, 0.5249, -0.8429, -0.2535, 0.3941, -0.8429, -0.2535, 0.5249, -0.8429)

[node name="Node3D" type="Node3D"]
script = ExtResource("1_3m4j7")

[node name="level" type="Node3D" parent="."]

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="level"]
transform = Transform3D(1, 0, 0, 0, 0.790989, 0.611831, 0, -0.611831, 0.790989, 0, 3.29243, 0)
light_energy = 2.0
shadow_enabled = true

[node name="NavigationRegion3D" type="NavigationRegion3D" parent="level"]
navmesh = SubResource("NavigationMesh_vwcsu")

[node name="MeshInstance3D" type="MeshInstance3D" parent="level/NavigationRegion3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1.29624, 0.426265, 2.3379)
mesh = SubResource("BoxMesh_ctec8")
skeleton = NodePath("../..")

[node name="StaticBody3D" type="StaticBody3D" parent="level/NavigationRegion3D/MeshInstance3D"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="level/NavigationRegion3D/MeshInstance3D/StaticBody3D"]
shape = SubResource("ConcavePolygonShape3D_t7t2r")

[node name="StaticBody3D" type="StaticBody3D" parent="level/NavigationRegion3D"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="level/NavigationRegion3D/StaticBody3D"]
shape = SubResource("WorldBoundaryShape3D_1k5nw")

[node name="floor" type="MeshInstance3D" parent="level/NavigationRegion3D/StaticBody3D"]
mesh = SubResource("PlaneMesh_4aphy")
skeleton = NodePath("../../../..")
surface_material_override/0 = SubResource("StandardMaterial3D_11dum")

[node name="Stairs" type="MeshInstance3D" parent="level/NavigationRegion3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.675737, 0, 6.07612)
mesh = ExtResource("2_bao3r")
skeleton = NodePath("../../..")

[node name="StaticBody3D" type="StaticBody3D" parent="level/NavigationRegion3D/Stairs"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="level/NavigationRegion3D/Stairs/StaticBody3D"]
shape = SubResource("ConcavePolygonShape3D_uymp4")

[node name="pivot" parent="." instance=ExtResource("1_mx36s")]

[node name="input" type="Node3D" parent="."]
script = ExtResource("2_fqsbe")

[node name="npc" parent="." instance=ExtResource("5_bkokk")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.83593, 0, 0.66316)
model_scene = "res://models/npcs/npc01/npc_01.tscn"
attrib = [8, 5, 5, 8, 3]
align = 1

[node name="UI" parent="." instance=ExtResource("6_cdpqt")]

[node name="hat" parent="." instance=ExtResource("6_681g0")]
transform = Transform3D(3.17985, 0, 3.85857, 0, 5, 0, -3.85857, 0, 3.17985, -3.87163, 0.885122, 2.39112)

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = ExtResource("6_dchxl")
